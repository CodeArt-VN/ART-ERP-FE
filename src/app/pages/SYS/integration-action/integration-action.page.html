<ion-header>
	<app-list-toolbar
	  pageTitle="{{'Organization structure' | translate}}"
	  [pageConfig]="pageConfig"
	  [selectedItems]="selectedItems"
	  [query]="query"
	  (add)="add()"
	  (refresh)="refresh()"
	  (export)="export()"
	  (import)="import($event)"
	  (help)="help()"
	  (unselect)="unselect()"
	  (archiveItems)="archiveItems()"
	  (deleteItems)="deleteItems()"
	></app-list-toolbar>
  </ion-header>
  
  <ion-content appScrollbarTheme class="scrollx" scroll-x="true">
	<ion-refresher
	  [disabled]="!pageConfig.refresher"
	  [disabled]="!pageConfig.refresher"
	  slot="fixed"
	  (ionRefresh)="refresh($event)"
	>
	  <ion-refresher-content></ion-refresher-content>
	</ion-refresher>
	<ion-fab *ngIf="pageConfig.isShowFeature" class="feature" vertical="top" horizontal="end" slot="fixed">
	  <div class="ion-padding"></div>
	</ion-fab>
  
	<section class="table">
	  <header class="bold">
		<div class="col-checkbox cell"></div>
		<div class="col-id cell">Id</div>
		<div class="col-name cell" >
		  {{'Name' | translate}}
		  <ion-icon *ngIf="sort.Name" [name]="sort.Name == 'Name'?'arrow-down': 'arrow-up'"></ion-icon>
		  <ion-icon
			(click)="pageConfig.isShowSearch = !pageConfig.isShowSearch"
			*ngIf="query.Keyword"
			name="search"
			color="primary"
		  ></ion-icon>
		</div>
		<div class="col-name provider cell">
			{{'Provider' | translate}}
		  </div>
		  <div class="col-code cell">
			{{'Type' | translate}}
		  </div>

	  </header>
	  <form (submit)="refresh()" action="#">
		<header class="filter" *ngIf="pageConfig.isShowSearch">
		  <div class="col-checkbox cell"></div>
		  <div class="hide-small col-id cell"></div>
		  <div class="col-name cell">
			<input
			  [ngModelOptions]="{standalone: true}"
			  [(ngModel)]="query.Keyword"
			  class="c-input"
			  [ngClass]="{active: query.Keyword}"
			  placeholder="Tìm theo tên hoặc mã..."
			  type="text"
			/>
			<ion-icon (click)="query.Keyword=''; refresh()" *ngIf="query.Keyword" name="close"></ion-icon>
		  </div>
		  <button mat-raised-button type="submit" style="display: none">Search</button>
		</header>
	  </form>
  
	<app-page-message [itemsLength]="items.length" [showSpinner]="pageConfig.showSpinner"></app-page-message>
	<div *ngIf="items.length && pageConfig.showSpinner==false">
		<section class="table">
					<div *ngFor="let i of items; let j = index;"  class="row" [ngClass]="{odd: j % 2 != 0}" [ngClass]="{selected: i.checked}">
						<div class="col-checkbox cell">
							<input (click)="changeSelection(i, $event)" class="c-checkbox" [(ngModel)]="i.checked" type="checkbox">
						</div>
						<div (click)="nav('integration-action/'+i.Id,'forward')" class="col-id cell">
							{{i.Id}}
						</div>
						<div (click)="nav('integration-action/'+i.Id,'forward')" class="col-name cell">
							{{i.Name}}
						</div>
						<div (click)="nav('integration-action/'+i.Id,'forward')" class="col-name provider cell">
							<ion-avatar ><ion-img #img [src]="i.ProviderIcon" (ionError)="img.src = 'assets/avartar-empty.jpg'"></ion-img ></ion-avatar>
						  {{i.ProviderName}}
						</div>
						<div class="col-code cell">
							{{i.Type}}
						</div>
					</div>
				
		</section>
	</div>
	<ion-infinite-scroll color="primary" threshold="20%" (ionInfinite)="loadData($event)" [disabled]="!pageConfig.infiniteScroll || pageConfig.isEndOfData">
		<ion-infinite-scroll-content loadingSpinner="dots"></ion-infinite-scroll-content>
	</ion-infinite-scroll>
	
	</section>
	<app-page-message [itemsLength]="itemsState.length" [showSpinner]="pageConfig.showSpinner"></app-page-message>
  </ion-content>
  